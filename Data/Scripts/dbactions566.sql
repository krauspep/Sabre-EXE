ALTER TABLE EMPLOYEE
ADD BLOCKED DM_BOOLEAN DEFAULT 0;

ALTER TABLE OPERATOR
ADD VISITOR_CAN_BLOCK DM_BOOLEAN DEFAULT 0;

ALTER TABLE OPERATOR
ADD VISITOR_SOME_REPORTS DM_BOOLEAN DEFAULT 0;

ALTER TABLE OPERATOR
ADD VISITOR_CANT_ADD DM_BOOLEAN DEFAULT 0;

CREATE TABLE VISITOR_GROUP_VISIBILITY
(
  VISITOR_GROUP_VISIBILITY_KEY DM_KEY,
  OPERATOR_KEY DM_KEY,
  VISITOR_GROUP_KEY DM_KEY,
  ACTIVE_RECORD DM_ACTIVE DEFAULT 1,
  DELETED DM_BOOLEAN DEFAULT 0,
  PRIMARY KEY (VISITOR_GROUP_VISIBILITY_KEY)
);

GRANT DELETE, INSERT, REFERENCES, SELECT, UPDATE
 ON VISITOR_GROUP_VISIBILITY TO  SYSDBA WITH GRANT OPTION;
 
CREATE GENERATOR VISITOR_GROUP_VISIBILITY_GEN;
 
CREATE TRIGGER TR_VISITOR_GROUP_VISIBILITY FOR VISITOR_GROUP_VISIBILITY ACTIVE
BEFORE INSERT POSITION 0
AS
begin
  if (new.VISITOR_GROUP_VISIBILITY_KEY is null)
  then begin
    new.VISITOR_GROUP_VISIBILITY_KEY = gen_id(VISITOR_GROUP_VISIBILITY_GEN, 1);
  end
end