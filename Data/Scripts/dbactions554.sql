CREATE TABLE DEVICE_TAB
(
  DEVICE_TAB_KEY DM_KEY,
  COMPANY_KEY DM_KEY NOT NULL,
  TAB_NAME DM_NAME,
  DELETED DM_BOOLEAN DEFAULT 0,
  ACTIVE_RECORD DM_ACTIVE DEFAULT 1,
  PRIMARY KEY (DEVICE_TAB_KEY)
);

GRANT DELETE, INSERT, REFERENCES, SELECT, UPDATE
 ON DEVICE_TAB TO  SYSDBA WITH GRANT OPTION;

CREATE GENERATOR DEVICE_TAB_GEN;

CREATE TRIGGER TR_DEVICE_TAB FOR DEVICE_TAB
ACTIVE BEFORE INSERT POSITION 0
AS
begin
  if (new.DEVICE_TAB_KEY is null)
  then begin
     new.DEVICE_TAB_KEY = gen_id(DEVICE_TAB_GEN, 1);
  end
  new.DELETED = 0;
  new.ACTIVE_RECORD = 1;
end
 
ALTER TABLE DEVICE_CONFIGURATION ADD 
DEVICE_TAB_KEY INTEGER DEFAULT -1;