ALTER TABLE INDIVIDUAL ADD MARITIAL_STATUS_KEY DM_KEY;

ALTER TABLE INDIVIDUAL ADD LAST_DEVICE_KEY DM_KEY;

ALTER TABLE INDIVIDUAL ADD EVENT_STATUS DM_EVENT_STATUS;

ALTER TABLE INDIVIDUAL ADD ANTI_PASS_BACK DM_BOOLEAN;

CREATE GENERATOR INDIVIDUAL_TIME_ZONE_GEN;

CREATE TABLE INDIVIDUAL_TIME_ZONE
(
  INDIVIDUAL_TIME_ZONE_KEY DM_KEY,
  INDIVIDUAL_KEY DM_KEY,
  DEVICE_CONFIGURATION_KEY DM_KEY,
  TIME_ZONE1 DM_SMALLINT,
  TIME_ZONE2 DM_SMALLINT,
  TIME_ZONE3 DM_SMALLINT,
  DELETED DM_BOOLEAN DEFAULT 0,
  ACTIVE_RECORD DM_ACTIVE DEFAULT 1,
  PRIMARY KEY (INDIVIDUAL_TIME_ZONE_KEY)
);

CREATE INDEX I_INDIVIDUAL_TIME_ZONE_1 ON INDIVIDUAL_TIME_ZONE (INDIVIDUAL_KEY, ACTIVE_RECORD, DELETED);

GRANT DELETE, INSERT, REFERENCES, SELECT, UPDATE ON INDIVIDUAL_TIME_ZONE TO  "SYSDBA" WITH GRANT OPTION;

CREATE TRIGGER TR_INDIVIDUAL_TIME_ZONE FOR INDIVIDUAL_TIME_ZONE
ACTIVE BEFORE INSERT POSITION 0
AS
begin
  if (new.INDIVIDUAL_TIME_ZONE_KEY is null)
  then begin
         new.INDIVIDUAL_TIME_ZONE_KEY = gen_id(INDIVIDUAL_TIME_ZONE_GEN, 1);
       end
end
