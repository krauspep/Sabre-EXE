CREATE GENERATOR TOGGLE_TIMES_GEN;

CREATE TABLE TOGGLE_TIMES
(
  TOGGLE_TIMES_KEY DM_KEY,
  TOGGLE_TIMES_EVENT_KEY DM_KEY_N1,
  FROM_TIME DM_TIME,
  TO_TIME DM_TIME,
  DELETED DM_BOOLEAN DEFAULT 0,
  ACTIVE_RECORD DM_ACTIVE DEFAULT 1,
  PRIMARY KEY (TOGGLE_TIMES_KEY)
);

GRANT DELETE, INSERT, REFERENCES, SELECT, UPDATE ON TOGGLE_TIMES TO  "SYSDBA" WITH GRANT OPTION;

CREATE TRIGGER TR_TOGGLE_TIMES FOR TOGGLE_TIMES
ACTIVE BEFORE INSERT POSITION 0
AS
begin
  if (new.TOGGLE_TIMES_KEY is null)
  then begin
         new.TOGGLE_TIMES_KEY = gen_id(TOGGLE_TIMES_GEN, 1);
       end
end