ALTER TABLE VISITOR
ADD VISITOR_GROUP_KEY DM_KEY DEFAULT -1;

CREATE GENERATOR VISITOR_GROUP_GEN;

CREATE TABLE VISITOR_GROUP
(
  VISITOR_GROUP_KEY DM_KEY,
  VISITOR_GROUP_NAME VARCHAR(60),
  CONTACT VARCHAR(60),
  DELETED DM_BOOLEAN DEFAULT 0,
  ACTIVE_RECORD DM_ACTIVE DEFAULT 1,
  PRIMARY KEY (VISITOR_GROUP_KEY)
);

GRANT DELETE, INSERT, REFERENCES, SELECT, UPDATE
 ON VISITOR_GROUP TO  SYSDBA WITH GRANT OPTION;

CREATE TRIGGER TR_VISITOR_GROUP FOR VISITOR_GROUP ACTIVE
BEFORE INSERT POSITION 0
AS
begin
  if (new.VISITOR_GROUP_KEY is null)
  then begin
         new.VISITOR_GROUP_KEY = gen_id(VISITOR_GROUP_GEN, 1);
       end
end

CREATE TRIGGER TR_VISITOR_GROUP_VALUES FOR VISITOR_GROUP ACTIVE
BEFORE INSERT POSITION 0
AS
begin
 new.DELETED = 0;
 new.ACTIVE_RECORD = 1;
end
