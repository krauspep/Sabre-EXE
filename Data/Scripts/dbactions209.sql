CREATE GENERATOR ATTENDANCE_EDIT_AUDIT_GEN;

CREATE TABLE ATTENDANCE_EDIT_AUDIT
(
  ATTENDANCE_EDIT_AUDIT_KEY DM_KEY,
  ATTENDANCE_KEY DM_KEY, 
  EDIT_NOTE DM_BLOB,
  CREATED_BY DM_KEY,
  CREATED_ON DM_DATE,
  LAST_MODIFIED_BY DM_KEY,
  LAST_MODIFIED_ON DM_DATE,
  ACTIVE_RECORD DM_ACTIVE DEFAULT 1,
  DELETED DM_BOOLEAN DEFAULT 0,
  PRIMARY KEY (ATTENDANCE_EDIT_AUDIT_KEY)
);

GRANT DELETE, INSERT, REFERENCES, SELECT, UPDATE ON ATTENDANCE_EDIT_AUDIT TO SYSDBA WITH GRANT OPTION;

CREATE TRIGGER TR_ATTENDANCE_EDIT_AUDIT FOR ATTENDANCE_EDIT_AUDIT
ACTIVE BEFORE INSERT POSITION 0
AS
begin
  if (new.ATTENDANCE_EDIT_AUDIT_KEY is null)
  then begin
         new.ATTENDANCE_EDIT_AUDIT_KEY = gen_id(ATTENDANCE_EDIT_AUDIT_GEN, 1);
       end
end
