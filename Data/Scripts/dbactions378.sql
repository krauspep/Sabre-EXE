CREATE GENERATOR EMPLOYEE_COMPANY_VISIBILITY_GEN;

CREATE TABLE EMPLOYEE_COMPANY_VISIBILITY
(
  EMPLOYEE_COMPANY_VISIBILITY_KEY DM_KEY,
  OPERATOR_KEY DM_KEY,
  COMPANY_KEY DM_KEY,
  ACTIVE_RECORD DM_ACTIVE DEFAULT 1,
  DELETED DM_BOOLEAN DEFAULT 0,
  PRIMARY KEY (EMPLOYEE_COMPANY_VISIBILITY_KEY)
);

GRANT DELETE, INSERT, REFERENCES, SELECT, UPDATE ON EMPLOYEE_COMPANY_VISIBILITY TO  "SYSDBA" WITH GRANT OPTION;


CREATE TRIGGER TR_EMPLOYEE_COMPANY_VISIBILITY FOR EMPLOYEE_COMPANY_VISIBILITY BEFORE INSERT POSITION 0
AS
begin
  if (new.EMPLOYEE_COMPANY_VISIBILITY_KEY is null)
  then begin
         new.EMPLOYEE_COMPANY_VISIBILITY_KEY = gen_id(EMPLOYEE_COMPANY_VISIBILITY_GEN, 1);
       end
end
