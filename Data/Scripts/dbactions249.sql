CREATE GENERATOR SHIFT_LINKED_DEPARTMENT_GEN;

CREATE TABLE SHIFT_LINKED_DEPARTMENT
(
  SHIFT_LINKED_DEPARTMENT_KEY DM_KEY NOT NULL,
  SHIFT_KEY DM_KEY_N1,
  DEPARTMENT_KEY DM_KEY_N1,
  DELETED DM_BOOLEAN DEFAULT 0,
  ACTIVE_RECORD DM_ACTIVE DEFAULT 1,
  PRIMARY KEY (SHIFT_LINKED_DEPARTMENT_KEY)
);

GRANT DELETE, INSERT, REFERENCES, SELECT, UPDATE ON SHIFT_LINKED_DEPARTMENT TO SYSDBA WITH GRANT OPTION;

CREATE TRIGGER TR_SHIFT_LINKED_DEPARTMENT FOR SHIFT_LINKED_DEPARTMENT ACTIVE BEFORE INSERT POSITION 0
AS
begin
  if (new.SHIFT_LINKED_DEPARTMENT_KEY is null)
  then begin
         new.SHIFT_LINKED_DEPARTMENT_KEY = gen_id(SHIFT_LINKED_DEPARTMENT_GEN, 1);
       end
end





