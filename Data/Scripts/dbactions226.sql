DROP TRIGGER TR_PUPIL_DEVICE_LINK;

CREATE TRIGGER TR_PUPIL_DEVICE_LINK FOR PUPIL_DEVICE_LINK ACTIVE BEFORE INSERT POSITION 0
AS
begin
  if (new.PUPIL_DEVICE_LINK_KEY is null)
  then begin
         new.PUPIL_DEVICE_LINK_KEY = gen_id(PUPIL_DEVICE_LINK_GEN, 1);
       end
end

CREATE TRIGGER TR_PUPIL_DEVICE_LINK_VALUES FOR PUPIL_DEVICE_LINK ACTIVE BEFORE INSERT POSITION 0
AS
begin
 new.DELETED = 0;
 new.ACTIVE_RECORD = 1;
end

CREATE DOMAIN DM_RATE_TYPE AS char(1) DEFAULT 'C' NOT NULL;

CREATE DOMAIN DM_RATE_OF_PAY AS char(1) DEFAULT 'M' NOT NULL;

ALTER TABLE EMPLOYEE_PAY_RATE_LINK ADD RATE_TYPE DM_RATE_TYPE;

ALTER TABLE EMPLOYEE_PAY_RATE_LINK ADD RATE_OF_PAY DM_RATE_OF_PAY;

