CREATE GENERATOR EMPLOYEE_NOTE_GEN;
COMMIT;

CREATE TABLE EMPLOYEE_NOTE (
  EMPLOYEE_NOTE_KEY         DM_KEY,
  EMPLOYEE_KEY              DM_KEY,
  EMPLOYEE_NOTE             DM_BLOB,
  DELETED                   DM_BOOLEAN
);

ALTER TABLE EMPLOYEE_NOTE ADD PRIMARY KEY (EMPLOYEE_NOTE_KEY);

SET TERM ^ ;
CREATE TRIGGER TR_EMPLOYEE_NOTE FOR EMPLOYEE_NOTE
ACTIVE BEFORE INSERT POSITION 0
AS
begin
  if (new.EMPLOYEE_NOTE_KEY is null)
  then begin
         new.EMPLOYEE_NOTE_KEY = gen_id(EMPLOYEE_NOTE_GEN, 1);
       end
end
^
SET TERM ; ^

COMMIT;


CREATE GENERATOR ABSENT_NOTE_GEN;
COMMIT;

CREATE TABLE ABSENT_NOTE (
  ABSENT_NOTE_KEY         DM_KEY,
  ABSENT_DATA_KEY         DM_KEY,
  ABSENT_NOTE             DM_BLOB,
  DELETED                 DM_BOOLEAN
);

ALTER TABLE ABSENT_NOTE ADD PRIMARY KEY (ABSENT_NOTE_KEY);

SET TERM ^ ;
CREATE TRIGGER TR_ABSENT_NOTE FOR ABSENT_NOTE
ACTIVE BEFORE INSERT POSITION 0
AS
begin
  if (new.ABSENT_NOTE_KEY is null)
  then begin
         new.ABSENT_NOTE_KEY = gen_id(ABSENT_NOTE_GEN, 1);
       end
end
^
SET TERM ; ^

COMMIT;

CREATE INDEX I_ABSENT_NOTE_1 ON ABSENT_NOTE (ABSENT_DATA_KEY, DELETED);

COMMIT;

ALTER TABLE ABSENT_DATA
DROP ABSENT_REASON;

COMMIT;


ALTER TABLE LEAVE_TYPE
ADD CHART_FONT_COLOUR   DM_COLOUR_NAME;

COMMIT;

