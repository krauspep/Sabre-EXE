ALTER TABLE RESIDENT ALTER COLUMN LAST_EVENT_DATE SET DEFAULT 0;

ALTER TABLE RESIDENT ALTER COLUMN LAST_EVENT_TIME SET DEFAULT '00:00:00';

CREATE DOMAIN DM_DATE_NN AS DATE NOT NULL;

CREATE DOMAIN DM_TIME_NN AS TIME NOT NULL;

UPDATE RESIDENT SET LAST_EVENT_DATE = '1900.01.01' WHERE LAST_EVENT_DATE IS NULL;

UPDATE RESIDENT SET LAST_EVENT_TIME = '00:00:00' WHERE LAST_EVENT_TIME IS NULL;

ALTER TABLE RESIDENT ALTER COLUMN LAST_EVENT_DATE TYPE DM_DATE_NN;

ALTER TABLE RESIDENT ALTER COLUMN LAST_EVENT_TIME TYPE DM_TIME_NN;

ALTER TABLE RESIDENT ADD LAST_DEVICE_KEY DM_KEY_N1 NOT NULL;