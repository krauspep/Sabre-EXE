update RDB$FIELDS set RDB$NULL_FLAG = 1 where RDB$FIELD_NAME = 'DM_BOOLEAN';

update RDB$FIELDS set RDB$NULL_FLAG = 1 where RDB$FIELD_NAME = 'DM_COLOUR_NAME';

update RDB$FIELDS set RDB$NULL_FLAG = 1 where RDB$FIELD_NAME = 'DM_EMPLOYEE_NO';

update RDB$FIELDS set RDB$NULL_FLAG = 1 where RDB$FIELD_NAME = 'DM_FALSE';

update RDB$FIELDS set RDB$NULL_FLAG = 1 where RDB$FIELD_NAME = 'DM_HOURS';

update RDB$FIELDS set RDB$NULL_FLAG = 1 where RDB$FIELD_NAME = 'DM_IP';

update RDB$FIELDS set RDB$NULL_FLAG = 1 where RDB$FIELD_NAME = 'DM_KEY';

update RDB$FIELDS set RDB$NULL_FLAG = 1 where RDB$FIELD_NAME = 'DM_MINUTES';

update RDB$FIELDS set RDB$NULL_FLAG = 1 where RDB$FIELD_NAME = 'DM_NAME';

update RDB$FIELDS set RDB$NULL_FLAG = 1 where RDB$FIELD_NAME = 'DM_OPERATOR_LOGIN_ID';

update RDB$FIELDS set RDB$NULL_FLAG = 1 where RDB$FIELD_NAME = 'DM_PASSWORD';

update RDB$FIELDS set RDB$NULL_FLAG = 1 where RDB$FIELD_NAME = 'DM_PORT';

update RDB$FIELDS set RDB$NULL_FLAG = 1 where RDB$FIELD_NAME = 'DM_SMALLINT_0';

update RDB$FIELDS set RDB$NULL_FLAG = 1 where RDB$FIELD_NAME = 'DM_TIME_SCALE_NAME';

update RDB$FIELDS set RDB$NULL_FLAG = 1 where RDB$FIELD_NAME = 'DM_TRUE';

update RDB$FIELDS set RDB$NULL_FLAG = 1 where RDB$FIELD_NAME = 'DM_ACTIVE';

update RDB$FIELDS set RDB$NULL_FLAG = 1 where RDB$FIELD_NAME = 'DM_PRIMARY_KEY';

update RDB$FIELDS set RDB$NULL_FLAG = 1 where RDB$FIELD_NAME = 'DM_RATE_TYPE';

update RDB$FIELDS set RDB$NULL_FLAG = 1 where RDB$FIELD_NAME = 'DM_RATE_OF_PAY';

CREATE GENERATOR DEPARTMENT_RATE_LINK_GEN;

CREATE TABLE DEPARTMENT_RATE_LINK
(
  DEPARTMENT_RATE_LINK_KEY DM_KEY,
  DEPARTMENT_KEY DM_KEY,
  RATE_KEY DM_KEY,
  HOURS_PER_DAY DM_SMALLINT,
  RATE_AMOUNT DM_CURRENCY DEFAULT 0,
  RATE_HOURLY DM_CURRENCY DEFAULT 0,
  RATE_DAILY DM_CURRENCY DEFAULT 0,
  RATE_WEEKLY DM_CURRENCY DEFAULT 0,
  RATE_FORTNIGHTLY DM_CURRENCY DEFAULT 0,
  RATE_MONTHLY DM_CURRENCY DEFAULT 0,
  RATE_OT1 DM_CURRENCY DEFAULT 0,
  RATE_OT2 DM_CURRENCY DEFAULT 0,
  RATE_SAT DM_CURRENCY DEFAULT 0,
  RATE_SUN DM_CURRENCY DEFAULT 0,
  RATE_PPH DM_CURRENCY DEFAULT 0,
  RATE_OT1_OVERRIDE DM_BOOLEAN DEFAULT 0,
  RATE_OT2_OVERRIDE DM_BOOLEAN DEFAULT 0,
  RATE_SAT_OVERRIDE DM_BOOLEAN DEFAULT 0,
  RATE_SUN_OVERRIDE DM_BOOLEAN DEFAULT 0,
  RATE_PPH_OVERRIDE DM_BOOLEAN DEFAULT 0,
  RATE_CODE DM_CODE,
  RATE_DESCRIPTION DM_NAME,
  EFFECTIVE_DATE_FROM DM_DATE_STR,  
  EFFECTIVE_DATE_TO DM_DATE_STR,
  EFFECTIVE_DATE_FROM_DATE DM_DATE,
  EFFECTIVE_DATE_TO_DATE DM_DATE,
  ACTIVE_RECORD DM_ACTIVE DEFAULT 1,
  DELETED DM_BOOLEAN DEFAULT 0,
  PRIMARY KEY (DEPARTMENT_RATE_LINK_KEY)
);


GRANT DELETE, INSERT, REFERENCES, SELECT, UPDATE ON DEPARTMENT_RATE_LINK TO SYSDBA WITH GRANT OPTION;

CREATE TRIGGER TR_DEPARTMENT_RATE_LINK FOR DEPARTMENT_RATE_LINK ACTIVE BEFORE INSERT POSITION 0
AS
begin
  if (new.DEPARTMENT_RATE_LINK_KEY is null)
  then begin
         new.DEPARTMENT_RATE_LINK_KEY = gen_id(DEPARTMENT_RATE_LINK_GEN, 1);
       end
end





