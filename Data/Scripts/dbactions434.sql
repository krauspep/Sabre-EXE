CREATE GENERATOR INDIV_DEPART_VISIBILITY_GEN;

CREATE TABLE INDIV_DEPART_VISIBILITY
(
  INDIV_DEPART_VISIBILITY_KEY DM_KEY,
  OPERATOR_KEY DM_KEY, 
  DEPARTMENT_KEY DM_KEY,
  ACTIVE_RECORD DM_ACTIVE DEFAULT 1,
  DELETED DM_BOOLEAN DEFAULT 0,
  PRIMARY KEY (INDIV_DEPART_VISIBILITY_KEY)
);

GRANT DELETE, INSERT, REFERENCES, SELECT, UPDATE ON INDIV_DEPART_VISIBILITY TO SYSDBA WITH GRANT OPTION;

CREATE TRIGGER TR_INDIV_DEPART_VISIBILITY FOR INDIV_DEPART_VISIBILITY
ACTIVE BEFORE INSERT POSITION 0
AS
begin
  if (new.INDIV_DEPART_VISIBILITY_KEY is null)
  then begin
         new.INDIV_DEPART_VISIBILITY_KEY = gen_id(INDIV_DEPART_VISIBILITY_GEN, 1);
       end
end

CREATE GENERATOR INDIV_CUSTOM_VISIBILITY_GEN;

CREATE TABLE INDIV_CUSTOM_VISIBILITY
(
  INDIV_CUSTOM_VISIBILITY_KEY DM_KEY,
  OPERATOR_KEY DM_KEY, 
  GENERIC_KEY DM_KEY,
  ACTIVE_RECORD DM_ACTIVE DEFAULT 1,
  DELETED DM_BOOLEAN DEFAULT 0,
  PRIMARY KEY (INDIV_CUSTOM_VISIBILITY_KEY)
);

GRANT DELETE, INSERT, REFERENCES, SELECT, UPDATE ON INDIV_CUSTOM_VISIBILITY TO SYSDBA WITH GRANT OPTION;

CREATE TRIGGER TR_INDIV_CUSTOM_VISIBILITY FOR INDIV_CUSTOM_VISIBILITY
ACTIVE BEFORE INSERT POSITION 0
AS
begin
  if (new.INDIV_CUSTOM_VISIBILITY_KEY is null)
  then begin
         new.INDIV_CUSTOM_VISIBILITY_KEY = gen_id(INDIV_CUSTOM_VISIBILITY_GEN, 1);
       end
end




