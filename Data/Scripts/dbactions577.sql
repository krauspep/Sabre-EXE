ALTER TABLE COMPANY  ADD NSA_HRS_RATE DM_FLOAT;

UPDATE COMPANY  SET NSA_HRS_RATE = 1;

ALTER TABLE COMPANY ADD NSA_SPLIT DM_BOOLEAN;

UPDATE COMPANY SET NSA_SPLIT = 0;

ALTER TABLE COMPANY ADD NSA_PAYROLL_MERGE DM_BOOLEAN;

UPDATE COMPANY SET NSA_PAYROLL_MERGE = 1;

ALTER TABLE EMPLOYEE_ATTENDANCE_DATA  ADD MINUTES_NSA_OVERTIME DM_INTEGER;

ALTER TABLE EMPLOYEE_ATTENDANCE_DATA  ADD APPROVED_MINUTES_NSA_OVERTIME DM_BOOLEAN;

ALTER TABLE EMPLOYEE_ATTENDANCE_DATA  ADD MINUTES_NSA_OT1 DM_INTEGER;

ALTER TABLE EMPLOYEE_ATTENDANCE_DATA  ADD APPROVED_MINUTES_NSA_OT1 DM_BOOLEAN;

ALTER TABLE EMPLOYEE_ATTENDANCE_DATA ADD NSA_OT1_RATE DM_FLOAT;

UPDATE EMPLOYEE_ATTENDANCE_DATA  SET MINUTES_NSA_OT1 = 0;

UPDATE EMPLOYEE_ATTENDANCE_DATA  SET APPROVED_MINUTES_NSA_OT1 = 0;

UPDATE EMPLOYEE_ATTENDANCE_DATA SET NSA_OT1_RATE = 0;

ALTER TABLE EMPLOYEE_ATTENDANCE_DATA  ADD MINUTES_NSA_OT2 DM_INTEGER;

ALTER TABLE EMPLOYEE_ATTENDANCE_DATA  ADD APPROVED_MINUTES_NSA_OT2 DM_BOOLEAN;

ALTER TABLE EMPLOYEE_ATTENDANCE_DATA ADD NSA_OT2_RATE DM_FLOAT;

UPDATE EMPLOYEE_ATTENDANCE_DATA  SET MINUTES_NSA_OT2 = 0;

UPDATE EMPLOYEE_ATTENDANCE_DATA  SET APPROVED_MINUTES_NSA_OT2 = 0;

UPDATE EMPLOYEE_ATTENDANCE_DATA SET NSA_OT2_RATE = 0;

ALTER TABLE EMPLOYEE_ATTENDANCE_DATA  ADD MINUTES_NSA_SAT DM_INTEGER;

ALTER TABLE EMPLOYEE_ATTENDANCE_DATA  ADD APPROVED_MINUTES_NSA_SAT DM_BOOLEAN;

ALTER TABLE EMPLOYEE_ATTENDANCE_DATA ADD NSA_SAT_RATE DM_FLOAT;

UPDATE EMPLOYEE_ATTENDANCE_DATA  SET MINUTES_NSA_SAT = 0;

UPDATE EMPLOYEE_ATTENDANCE_DATA  SET APPROVED_MINUTES_NSA_SAT = 0;

UPDATE EMPLOYEE_ATTENDANCE_DATA SET NSA_SAT_RATE = 0;

ALTER TABLE EMPLOYEE_ATTENDANCE_DATA  ADD MINUTES_NSA_SUN DM_INTEGER;

ALTER TABLE EMPLOYEE_ATTENDANCE_DATA  ADD APPROVED_MINUTES_NSA_SUN DM_BOOLEAN;

ALTER TABLE EMPLOYEE_ATTENDANCE_DATA ADD NSA_SUN_RATE DM_FLOAT;

UPDATE EMPLOYEE_ATTENDANCE_DATA  SET MINUTES_NSA_SUN = 0;

UPDATE EMPLOYEE_ATTENDANCE_DATA  SET APPROVED_MINUTES_NSA_SUN = 0;

UPDATE EMPLOYEE_ATTENDANCE_DATA SET NSA_SUN_RATE = 0;

ALTER TABLE EMPLOYEE_ATTENDANCE_DATA  ADD MINUTES_NSA_PPH DM_INTEGER;

ALTER TABLE EMPLOYEE_ATTENDANCE_DATA  ADD APPROVED_MINUTES_NSA_PPH DM_BOOLEAN;

ALTER TABLE EMPLOYEE_ATTENDANCE_DATA ADD NSA_PPH_RATE DM_FLOAT;

UPDATE EMPLOYEE_ATTENDANCE_DATA  SET MINUTES_NSA_PPH = 0;

UPDATE EMPLOYEE_ATTENDANCE_DATA  SET APPROVED_MINUTES_NSA_PPH = 0;

UPDATE EMPLOYEE_ATTENDANCE_DATA SET NSA_PPH_RATE = 0;

ALTER TABLE EMPLOYEE_ATTENDANCE_AMENDED  ADD MINUTES_NSA_OVERTIME DM_INTEGER;

ALTER TABLE EMPLOYEE_ATTENDANCE_AMENDED  ADD APPROVED_MINUTES_NSA_OVERTIME DM_BOOLEAN;

ALTER TABLE EMPLOYEE_ATTENDANCE_AMENDED  ADD MINUTES_NSA_OT1 DM_INTEGER;

ALTER TABLE EMPLOYEE_ATTENDANCE_AMENDED  ADD APPROVED_MINUTES_NSA_OT1 DM_BOOLEAN;

ALTER TABLE EMPLOYEE_ATTENDANCE_AMENDED ADD NSA_OT1_RATE DM_FLOAT;

UPDATE EMPLOYEE_ATTENDANCE_AMENDED  SET MINUTES_NSA_OT1 = 0;

UPDATE EMPLOYEE_ATTENDANCE_AMENDED  SET APPROVED_MINUTES_NSA_OT1 = 0;

UPDATE EMPLOYEE_ATTENDANCE_AMENDED SET NSA_OT1_RATE = 0;

ALTER TABLE EMPLOYEE_ATTENDANCE_AMENDED  ADD MINUTES_NSA_OT2 DM_INTEGER;

ALTER TABLE EMPLOYEE_ATTENDANCE_AMENDED  ADD APPROVED_MINUTES_NSA_OT2 DM_BOOLEAN;

ALTER TABLE EMPLOYEE_ATTENDANCE_AMENDED ADD NSA_OT2_RATE DM_FLOAT;

UPDATE EMPLOYEE_ATTENDANCE_AMENDED  SET MINUTES_NSA_OT2 = 0;

UPDATE EMPLOYEE_ATTENDANCE_AMENDED  SET APPROVED_MINUTES_NSA_OT2 = 0;

UPDATE EMPLOYEE_ATTENDANCE_AMENDED SET NSA_OT2_RATE = 0;

ALTER TABLE EMPLOYEE_ATTENDANCE_AMENDED  ADD MINUTES_NSA_SAT DM_INTEGER;

ALTER TABLE EMPLOYEE_ATTENDANCE_AMENDED  ADD APPROVED_MINUTES_NSA_SAT DM_BOOLEAN;

ALTER TABLE EMPLOYEE_ATTENDANCE_AMENDED ADD NSA_SAT_RATE DM_FLOAT;

UPDATE EMPLOYEE_ATTENDANCE_AMENDED  SET MINUTES_NSA_SAT = 0;

UPDATE EMPLOYEE_ATTENDANCE_AMENDED  SET APPROVED_MINUTES_NSA_SAT = 0;

UPDATE EMPLOYEE_ATTENDANCE_AMENDED SET NSA_SAT_RATE = 0;

ALTER TABLE EMPLOYEE_ATTENDANCE_AMENDED  ADD MINUTES_NSA_SUN DM_INTEGER;

ALTER TABLE EMPLOYEE_ATTENDANCE_AMENDED  ADD APPROVED_MINUTES_NSA_SUN DM_BOOLEAN;

ALTER TABLE EMPLOYEE_ATTENDANCE_AMENDED ADD NSA_SUN_RATE DM_FLOAT;

UPDATE EMPLOYEE_ATTENDANCE_AMENDED  SET MINUTES_NSA_SUN = 0;

UPDATE EMPLOYEE_ATTENDANCE_AMENDED  SET APPROVED_MINUTES_NSA_SUN = 0;

UPDATE EMPLOYEE_ATTENDANCE_AMENDED SET NSA_SUN_RATE = 0;

ALTER TABLE EMPLOYEE_ATTENDANCE_AMENDED  ADD MINUTES_NSA_PPH DM_INTEGER;

ALTER TABLE EMPLOYEE_ATTENDANCE_AMENDED  ADD APPROVED_MINUTES_NSA_PPH DM_BOOLEAN;

ALTER TABLE EMPLOYEE_ATTENDANCE_AMENDED ADD NSA_PPH_RATE DM_FLOAT;

UPDATE EMPLOYEE_ATTENDANCE_AMENDED  SET MINUTES_NSA_PPH = 0;

UPDATE EMPLOYEE_ATTENDANCE_AMENDED  SET APPROVED_MINUTES_NSA_PPH = 0;

UPDATE EMPLOYEE_ATTENDANCE_AMENDED SET NSA_PPH_RATE = 0;

ALTER TABLE PAYROLL_CALCULATION_AUDIT ADD NSA_HOURS_WORKED_OT1 DM_INTEGER;

UPDATE PAYROLL_CALCULATION_AUDIT SET NSA_HOURS_WORKED_OT1 = 0;

ALTER TABLE PAYROLL_CALCULATION_AUDIT ADD NSA_HOURS_WORKED_OT2 DM_INTEGER;

UPDATE PAYROLL_CALCULATION_AUDIT SET NSA_HOURS_WORKED_OT2 = 0;

ALTER TABLE PAYROLL_CALCULATION_AUDIT ADD NSA_HOURS_WORKED_SAT DM_INTEGER;

UPDATE PAYROLL_CALCULATION_AUDIT SET NSA_HOURS_WORKED_SAT = 0;

ALTER TABLE PAYROLL_CALCULATION_AUDIT ADD NSA_HOURS_WORKED_SUN DM_INTEGER;

UPDATE PAYROLL_CALCULATION_AUDIT SET NSA_HOURS_WORKED_SUN = 0;

ALTER TABLE SHIFT ADD OVERRIDE_STRICT_TIME DM_BOOLEAN;

UPDATE SHIFT SET OVERRIDE_STRICT_TIME = 0;

ALTER TABLE SHIFT ADD STRICT_TIME_START DM_BOOLEAN;

ALTER TABLE SHIFT ADD STRICT_TIME_END DM_BOOLEAN;

UPDATE SHIFT SET STRICT_TIME_START = 0;

UPDATE SHIFT SET STRICT_TIME_END = 0;

ALTER TABLE SHIFT ADD STRICT_START_ROUNDING INT DEFAULT 0;

ALTER TABLE SHIFT ADD STRICT_END_ROUNDING INT DEFAULT 0;

UPDATE SHIFT SET STRICT_START_ROUNDING = 0;

UPDATE SHIFT SET STRICT_END_ROUNDING = 0;

ALTER TABLE SHIFT ADD STRICT_START_THRESHOLD INT DEFAULT 0;

ALTER TABLE SHIFT ADD STRICT_END_THRESHOLD INT DEFAULT 0;

ALTER TABLE SHIFT ADD STRICT_START_OPTION INT DEFAULT 0;

ALTER TABLE SHIFT ADD STRICT_END_OPTION INT DEFAULT 0;

UPDATE SHIFT SET STRICT_START_THRESHOLD = 0;

UPDATE SHIFT SET STRICT_END_THRESHOLD = 0;

UPDATE SHIFT SET STRICT_START_OPTION = 0;

UPDATE SHIFT SET STRICT_END_OPTION = 0;

ALTER TABLE SHIFT ADD 
STRICT_START_DISABLE_RANGE DM_BOOLEAN DEFAULT 0;

ALTER TABLE SHIFT ADD 
STRICT_END_DISABLE_RANGE DM_BOOLEAN DEFAULT 0;

ALTER TABLE SHIFT ADD 
STRICT_START_EXCEPTION INTEGER DEFAULT 0;

ALTER TABLE SHIFT ADD 
STRICT_END_EXCEPTION INTEGER DEFAULT 0;

ALTER TABLE SHIFT ADD 
STRICT_START_START_DATE DM_DATE;
 
ALTER TABLE SHIFT ADD 
STRICT_END_START_DATE DM_DATE;

ALTER TABLE SHIFT ADD 
STRICT_START_END_DATE DM_DATE;
 
ALTER TABLE SHIFT ADD 
STRICT_END_END_DATE DM_DATE;

DROP TRIGGER EMPLOYEE_ATTENDANCE_DATA_INSERT;

DROP TRIGGER EMPLOYEE_ATTENDANCE_DATA_UPDATE;

DROP TRIGGER EMPLOYEE_ATTENDANCE_DATA_DELETE;

CREATE TRIGGER EMPLOYEE_ATTENDANCE_DATA_INSERT for EMPLOYEE_ATTENDANCE_DATA
  after insert 
  POSITION 0
as
begin
  INSERT INTO EMPLOYEE_ATTENDANCE_AMENDED 
    SELECT * FROM EMPLOYEE_ATTENDANCE_DATA 
    WHERE EMPLOYEE_ATTENDANCE_DATA_KEY = new.EMPLOYEE_ATTENDANCE_DATA_KEY;
end

CREATE TRIGGER EMPLOYEE_ATTENDANCE_DATA_UPDATE for EMPLOYEE_ATTENDANCE_DATA
  after update 
  POSITION 0
as
begin
  DELETE FROM EMPLOYEE_ATTENDANCE_AMENDED WHERE EMPLOYEE_ATTENDANCE_AMENDED_KEY = new.EMPLOYEE_ATTENDANCE_DATA_KEY;
  INSERT INTO EMPLOYEE_ATTENDANCE_AMENDED SELECT * FROM EMPLOYEE_ATTENDANCE_DATA WHERE EMPLOYEE_ATTENDANCE_DATA_KEY = new.EMPLOYEE_ATTENDANCE_DATA_KEY;
end

CREATE TRIGGER EMPLOYEE_ATTENDANCE_DATA_DELETE for EMPLOYEE_ATTENDANCE_DATA
  after DELETE 
as
begin
  DELETE FROM EMPLOYEE_ATTENDANCE_AMENDED WHERE EMPLOYEE_ATTENDANCE_AMENDED_KEY = old.EMPLOYEE_ATTENDANCE_DATA_KEY;
end
