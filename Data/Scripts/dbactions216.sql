ALTER TABLE ATTENDANCE_SUMMARY_TEMP_PRINT ADD OT1_PAY DM_CURRENCY;

ALTER TABLE ATTENDANCE_SUMMARY_TEMP_PRINT ADD OT2_PAY DM_CURRENCY;

ALTER TABLE ATTENDANCE_SUMMARY_TEMP_PRINT ADD SAT_PAY DM_CURRENCY;

ALTER TABLE ATTENDANCE_SUMMARY_TEMP_PRINT ADD SUN_PAY DM_CURRENCY;

ALTER TABLE ATTENDANCE_SUMMARY_TEMP_PRINT ADD PPH_PAY DM_CURRENCY;

ALTER TABLE EMPLOYEE ADD PAY_CYCLE DM_CHAR;

ALTER TABLE EMPLOYEE_ATTENDANCE_DATA ADD RATE_HOUR_OVERRIDE DM_BOOLEAN;

CREATE GENERATOR EMPLOYEE_PAY_RATE_LINK_GEN;

CREATE TABLE EMPLOYEE_PAY_RATE_LINK
(
  EMPLOYEE_PAY_RATE_LINK_KEY DM_KEY,
  EMPLOYEE_SHIFT_KEY DM_KEY, 
  SHIFT_RATE_LINK_KEY DM_KEY,
  SHIFT_MINUTES DM_SMALLINT,
  SHIFT_DAY_COUNT DM_SMALLINT,
  PAY_CYCLE DM_CHAR,
  RATE_AMOUNT DM_CURRENCY,
  RATE_HOURLY DM_CURRENCY,
  RATE_DAILY DM_CURRENCY,
  RATE_WEEKLY DM_CURRENCY,
  RATE_FORTNIGHTLY DM_CURRENCY,
  RATE_MONTHLY DM_CURRENCY,
  OT1_RATE DM_FLOAT,
  OT2_RATE DM_FLOAT,
  SAT_RATE DM_FLOAT,
  SUN_RATE DM_FLOAT,
  PPH_RATE DM_FLOAT,
  OT1_PAY DM_CURRENCY,
  OT2_PAY DM_CURRENCY,
  SAT_PAY DM_CURRENCY,
  SUN_PAY DM_CURRENCY,
  PPH_PAY DM_CURRENCY,
  OT1_OVERRIDE DM_BOOLEAN,
  OT2_OVERRIDE DM_BOOLEAN,
  SAT_OVERRIDE DM_BOOLEAN,
  SUN_OVERRIDE DM_BOOLEAN,
  PPH_OVERRIDE DM_BOOLEAN,
  EFFECTIVE_DATE_FROM DM_DATE_STR,
  EFFECTIVE_DATE_TO DM_DATE_STR,
  EFFECTIVE_DATE_FROM_DATE DM_DATE,
  EFFECTIVE_DATE_TO_DATE DM_DATE,
  ACTIVE_RECORD DM_ACTIVE DEFAULT 1,
  DELETED DM_BOOLEAN DEFAULT 0,
  PRIMARY KEY (EMPLOYEE_PAY_RATE_LINK_KEY)
);

GRANT DELETE, INSERT, REFERENCES, SELECT, UPDATE ON EMPLOYEE_PAY_RATE_LINK TO SYSDBA WITH GRANT OPTION;

CREATE TRIGGER TR_EMPLOYEE_PAY_RATE_LINK FOR EMPLOYEE_PAY_RATE_LINK
ACTIVE BEFORE INSERT POSITION 0
AS
begin
  if (new.EMPLOYEE_PAY_RATE_LINK_KEY is null)
  then begin
         new.EMPLOYEE_PAY_RATE_LINK_KEY = gen_id(EMPLOYEE_PAY_RATE_LINK_GEN, 1);
       end
end



