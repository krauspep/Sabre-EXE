CREATE GENERATOR GPRS_DEVICE_CONFIGURATION_GEN;

CREATE TABLE GPRS_DEVICE_CONFIGURATION
(
  GPRS_DEVICE_CONFIGURATION_KEY DM_KEY,
  DEVICE_CONFIGURATION_KEY DM_KEY,
  MODEM_TYPE DM_CHAR,
  CONNECT_MODEM DM_BOOLEAN,
  KEEP_ALIVE  DM_BOOLEAN,
  AUTO_UPLOAD_FREQUENCY DM_SMALLINT,
  SERVER_CHECK_MODE DM_CHAR,
  SERVER_AUTHENTICATION DM_SMALLINT,
  TIMEOUT DM_SMALLINT,
  DATA_SERVER_IP_ADDRESS DM_IP,
  APN DM_VARCHAR_12,
  GPRS_USERNAME DM_VARCHAR_22,
  GPRS_PASSWORD DM_VARCHAR_12,
  DIALNUMBER DM_VARCHAR_20,
  DELETED DM_BOOLEAN,
  ACTIVE_RECORD DM_ACTIVE DEFAULT 1,
  PRIMARY KEY (GPRS_DEVICE_CONFIGURATION_KEY)
);


GRANT DELETE, INSERT, REFERENCES, SELECT, UPDATE ON GPRS_DEVICE_CONFIGURATION TO SYSDBA WITH GRANT OPTION;

CREATE TRIGGER TR_GPRS_DEVICE_CONFIGURATION FOR GPRS_DEVICE_CONFIGURATION ACTIVE BEFORE INSERT POSITION 0
AS
begin
  if (new.GPRS_DEVICE_CONFIGURATION_KEY is null)
  then begin
         new.GPRS_DEVICE_CONFIGURATION_KEY = gen_id(GPRS_DEVICE_CONFIGURATION_GEN, 1);
       end
end
