CREATE GENERATOR PANEL_DOOR_GEN;

CREATE TABLE PANEL_DOOR
(
  PANEL_DOOR_KEY DM_KEY,
  PANEL_DOOR_NAME VARCHAR(60),
  IN_OUT DM_SMALLINT,
  DOOR_ID DM_SMALLINT, 
  DEVICE_CONFIGURATION_KEY DM_KEY_N1,
  DELETED DM_BOOLEAN DEFAULT 0,
  ACTIVE_RECORD DM_ACTIVE DEFAULT 1,
  PRIMARY KEY (PANEL_DOOR_KEY)
);

GRANT DELETE, INSERT, REFERENCES, SELECT, UPDATE
 ON PANEL_DOOR TO  SYSDBA WITH GRANT OPTION;

CREATE TRIGGER TR_PANEL_DOOR FOR PANEL_DOOR ACTIVE
BEFORE INSERT POSITION 0
AS
begin
  if (new.PANEL_DOOR_KEY is null)
  then begin
         new.PANEL_DOOR_KEY = gen_id(PANEL_DOOR_GEN, 1);
       end
end

CREATE TRIGGER TR_PANEL_DOOR_VALUES FOR PANEL_DOOR ACTIVE
BEFORE INSERT POSITION 0
AS
begin
 new.DELETED = 0;
 new.ACTIVE_RECORD = 1;
end
