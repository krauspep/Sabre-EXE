CREATE GENERATOR SHIFT_RATE_LINK_GEN;

CREATE TABLE SHIFT_RATE_LINK
(
  SHIFT_RATE_LINK_KEY DM_KEY,
  SHIFT_KEY DM_KEY, 
  RATE_KEY DM_KEY, 
  HOURS_PER_DAY DM_SMALLINT,
  RATE_AMOUNT DM_CURRENCY,
  RATE_HOURLY DM_CURRENCY,
  RATE_DAILY DM_CURRENCY,
  RATE_WEEKLY DM_CURRENCY,
  RATE_FORTNIGHTLY DM_CURRENCY,
  RATE_MONTHLY DM_CURRENCY ,
  ACTIVE_RECORD DM_ACTIVE DEFAULT 1,
  DELETED DM_BOOLEAN DEFAULT 0,
  PRIMARY KEY (SHIFT_RATE_LINK_KEY)
);

GRANT DELETE, INSERT, REFERENCES, SELECT, UPDATE ON SHIFT_RATE_LINK TO SYSDBA WITH GRANT OPTION;

CREATE TRIGGER TR_SHIFT_RATE_LINK FOR SHIFT_RATE_LINK
ACTIVE BEFORE INSERT POSITION 0
AS
begin
  if (new.SHIFT_RATE_LINK_KEY is null)
  then begin
         new.SHIFT_RATE_LINK_KEY = gen_id(SHIFT_RATE_LINK_GEN, 1);
       end
end

ALTER TABLE SHIFT_RATE_LINK ADD RATE_OT1 DM_CURRENCY;

ALTER TABLE SHIFT_RATE_LINK ADD RATE_OT2 DM_CURRENCY;

ALTER TABLE SHIFT_RATE_LINK ADD RATE_SAT DM_CURRENCY;

ALTER TABLE SHIFT_RATE_LINK ADD RATE_SUN DM_CURRENCY;

ALTER TABLE SHIFT_RATE_LINK ADD RATE_PPH DM_CURRENCY;



