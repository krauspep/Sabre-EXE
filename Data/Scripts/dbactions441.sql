CREATE GENERATOR GENERIC_PROFILE_GEN;

CREATE TABLE GENERIC_PROFILE
(
  GENERIC_PROFILE_KEY DM_KEY,
  GENERIC_KEY DM_KEY,
  NATIONALITY_KEY DM_KEY_N1,
  RACE_KEY DM_KEY_N1,
  BIRTH_PLACE_NAME DM_NAME_NULL,
  GENERIC_HEIGHT DM_CURRENCY,
  GENERIC_WEIGHT DM_CURRENCY,
  BUILD_KEY DM_KEY_N1,
  SPECTACLES DM_BOOLEAN DEFAULT 0,
  HAIR_COLOUR_KEY DM_KEY_N1,
  HAIR_STYLE DM_NAME_NULL,
  EYE_COLOUR_KEY DM_KEY,
  DELETED DM_BOOLEAN DEFAULT 0,
  ACTIVE_RECORD DM_ACTIVE DEFAULT 1,
  PRIMARY KEY (GENERIC_PROFILE_KEY)
);

GRANT DELETE, INSERT, REFERENCES, SELECT, UPDATE ON GENERIC_PROFILE TO  "SYSDBA" WITH GRANT OPTION;

CREATE TRIGGER TR_GENERIC_PROFILE FOR GENERIC_PROFILE
ACTIVE BEFORE INSERT POSITION 0
AS
begin
  if (new.GENERIC_PROFILE_KEY is null)
  then begin
         new.GENERIC_PROFILE_KEY = gen_id(GENERIC_PROFILE_GEN, 1);
       end
end
